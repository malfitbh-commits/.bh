<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title data-translate-key="page_title">MALFIT | Home</title>
        <link rel="icon" type="image/png" href="img/favicon.ico" sizes="96x96" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
        <link rel="manifest" href="/site.webmanifest" />
        <!-- Load Tailwind CSS for utility classes --><script src="https://cdn.tailwindcss.com"></script>
        <!-- Load Lucide Icons for SVG icons --><script type="module" src="https://unpkg.com/lucide@latest"></script> 
        <style>
            /* Custom styles for the falling items and overall look */
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
            
            body { 
                font-family: 'Inter', sans-serif; 
                margin: 0;
                padding: 0;
                overflow-x: hidden;
            }

            /* Apply Arabic font when direction is RTL */
            html[dir="rtl"] body {
                font-family: 'Cairo', sans-serif;
            }

            /* --- Video Background Styles (Fixed) --- */
            #background-video {
                width: 100vw;
                height: 100vh;
                object-fit: cover;
                position: fixed;
                top: 0;
                left: 0;
                z-index: -1;
            }

            /* --- Scrolling Content Styles --- */
            .content-section {
                position: relative;
                z-index: 20;
                padding: 4rem 1rem;
            }
            
            /* Custom mobile fallback: Hide video and use solid background/image */
            @media (max-width: 768px) {
                #background-video {
                    display: none;
                }
                .hero-container {
                    /* Fallback to MALFIT primary gradient for mobile background */
                    background: linear-gradient(135deg, #4f46e5, #986cff) no-repeat center center fixed; 
                    background-size: cover;
                }
            }
            
            /* --- Header and Menu Styles --- */
            /* Ensure text aligns correctly based on direction */
            html[dir="rtl"] .text-left { text-align: right; }
            html[dir="rtl"] .text-right { text-align: left; }
            /* Reverse header links on desktop for RTL */
            html[dir="rtl"] .space-x-4 > :not([hidden]) ~ :not([hidden]) {
                --tw-space-x-reverse: 1; 
                margin-right: calc(1rem * var(--tw-space-x-reverse));
                margin-left: calc(1rem * calc(1 - var(--tw-space-x-reverse)));
            }
            /* Reverse the order of About Us content and adjust text alignment */
            html[dir="rtl"] .about-container {
                flex-direction: row-reverse; 
                text-align: right; 
            }
            html[dir="rtl"] .us {
                text-align: left; /* Adjust image container alignment back */
            }

            /* Mobile menu styling (Hidden by default) */
            #mobile-menu {
                transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
                max-height: 0;
                overflow: hidden;
                opacity: 0;
                background-color: rgba(79, 70, 229, 0.9); /* Indigo translucent background */
                position: fixed;
                top: 64px; /* Below the header */
                right: 0;
                left: 0;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
                z-index: 40; /* Higher than header backdrop */
            }
            #mobile-menu.active {
                max-height: 500px;
                opacity: 1;
                padding: 10px 0;
            }
            #mobile-menu a {
                display: block;
                padding: 10px 20px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.2);
                color: #fff;
                text-decoration: none;
                transition: background-color 0.2s;
            }
            #mobile-menu a:hover {
                background-color: rgba(255, 255, 255, 0.1);
            }


            /* --- Dashboard Button Card Styling --- */
            .dashboard-card {
                height: 110px;
                font-size: 24px;
                font-weight: 700;
                text-decoration: none;
                display: flex;
                justify-content: center;
                align-items: center;
                border-radius: 12px; 
                cursor: pointer;
                overflow: hidden;

                background-color: rgba(255, 255, 255, 0.15);
                backdrop-filter: blur(5px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                color: white;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }

            .dashboard-card:hover {
                background-color: rgba(79, 70, 229, 0.7);
                border-color: #4f46e5;
                transform: scale(1.05) translateY(-5px);
                box-shadow: 0 15px 25px rgba(0, 0, 0, 0.4);
            }

            .card-text {
                position: relative;
                z-index: 2;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); 
            }

            /* --- About Us Section Styles --- */
            .about-container {
                display: flex;
                justify-content: center;
                align-items: center;
                padding: 40px;
                gap: 40px;
                text-align: left; /* Default LTR alignment */
            }
            
            .leading {
                flex: 1;
                font-size: 25px;
                color: #000000;
            }
            .us {
                flex: 1;
                text-align: right;
            }
            
            html[dir="rtl"] .leading {
                text-align: right;
            }


            @media (max-width: 768px) {
                .leading {
                    font-size: 20px;
                }
                .about-container {
                    flex-direction: column;
                    text-align: center;
                    gap: 20px;
                }
                .us {
                    text-align: center;
                }
            }
            
        </style>
    </head>
<body class="bg-gray-50">

    <!-- 1. Background Video -->
    <video autoplay muted loop playsinline id="background-video" poster="https://placehold.co/1920x1080/4f46e5/ffffff?text=Loading+Video">
        <source src="video/THE HEALTH & WELLNESS COLLECTION - 4K Stock Video Footage - FILMPAC (1080p, h264).mp4" type="video/mp4" onerror="this.onerror=null; this.parentNode.parentNode.style.background='linear-gradient(135deg, #4f46e5, #986cff)'; this.parentNode.parentNode.classList.remove('video-container');">
    </video>

    <!-- 2. Main Content Container (Relative to contain children, z-index 20 to be on top) -->
    <div class="relative z-20">

        <!-- Fixed Header (Transparent/Blurred) -->
        <header class="bg-indigo-900/20 backdrop-blur-md p-4 fixed w-full top-0 z-50 shadow-lg">
            <div class="max-w-7xl mx-auto flex justify-between items-center px-4 md:px-0">
                <!-- Logo -->
                <div class="logo">
                    <h1 class="text-2xl font-bold text-white tracking-widest" data-translate-key="logo">MALFIT</h1>
                </div>

                <!-- Desktop Navigation Links (Hidden on small screens) --><nav class="hidden md:flex space-x-4">
                    <a href="notification.html" class="text-white hover:text-indigo-300 transition duration-300 font-medium" data-translate-key="nav_notification">Notification</a>
                    <a href="Fitness Website.html" class="text-white hover:text-indigo-300 transition duration-300 font-medium" data-translate-key="nav_logout">Log Out</a>
                </nav>

                <!-- Icons and Mobile Menu Toggle on the right -->
                <div class="flex items-center space-x-4">
                    
                    <!-- Language Switch Icon (Updated to a letter in a circle) -->
                    <button id="lang-toggle" class="text-white transition duration-300 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm border-2 border-white hover:border-indigo-300 hover:text-indigo-300 bg-white/20 hover:bg-white/40">
                        <span id="current-lang">EN</span>
                    </button>
                    
                    <!-- Home Icon --><a href="afterthelogpage.html" class="text-white hover:text-indigo-300 transition duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                    </a>

                    <!-- Account Icon --><a href="accountData.html" class="text-white hover:text-indigo-300 transition duration-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    </a>

                    <!-- Mobile Menu Toggle (Hamburger Icon - Visible only on small screens) --><button id="menu-toggle" class="md:hidden text-white hover:text-indigo-300">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
                    </button>
                </div>
            </div>
        </header>
        
        <!-- Mobile Navigation Menu --><div id="mobile-menu">
            <a href="notification.html" data-translate-key="nav_notification">Notification</a>
            <a href="Fitness Website.html" data-translate-key="nav_logout">Log Out</a>
        </div>

        <!-- Hero Section (Dashboard Buttons Over the Video) -->
        <section class="hero-container h-screen flex items-center justify-center pt-24 pb-16 relative">
            <!-- Semi-transparent overlay for text readability -->
            <div class="absolute inset-0 bg-black/50 z-0"></div>
            <div class="text-center p-4 relative z-10 max-w-6xl mx-auto">
                <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-10 leading-snug">
                    <span data-translate-key="hero_welcome">Welcome to</span> <span class="text-indigo-300" data-translate-key="logo">MALFIT</span>
                </h1>
                
                <!-- Main Link Buttons Grid -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-4">
                    <!-- Button 1: Calories --><a href="Calories/Calories.html" id="btn1" class="dashboard-card">
                        <span class="card-text" data-translate-key="btn_calories">Calories</span>
                    </a>
                    
                    <!-- Button 2: Eat Healthy --><a href="eathealrhy.html" id="btn2" class="dashboard-card">
                        <span class="card-text" data-translate-key="btn_eat_healthy">Eat Healthy</span>
                    </a>
                    
                    <!-- Button 3: Plans --><a href="plane.html" id="btn3" class="dashboard-card">
                        <span class="card-text" data-translate-key="btn_plans">Plans</span>
                    </a>
                    
                    <!-- Button 4: Clubs --><a href="club.html" id="btn4" class="dashboard-card">
                        <span class="card-text" data-translate-key="btn_clubs">Clubs</span>
                    </a>
                    
                    <!-- Button 5: Survey --><a href="survey.html" id="btn5" class="dashboard-card">
                        <span class="card-text" data-translate-key="btn_survey">Survey</span>
                    </a>
                    
                    <!-- Button 6: Contact Us (NEW) --><a href="contact.html" id="btn6" class="dashboard-card">
                        <span class="card-text" data-translate-key="btn_contact">Contact Us</span>
                    </a>
                </div>
            </div>
        </section>

        <!-- About Us Section (Scrolls over the video) -->
        <section id="about" class="content-section bg-white shadow-xl">
            <div class="max-w-7xl mx-auto about-container rounded-xl">
                <div class="leading">
                    <h3 class="text-4xl font-extrabold mb-4 text-indigo-600" data-translate-key="about_title">About Us</h3>
                    <p data-translate-key="about_text_p1">At MALFIT, we believe that true health extends beyond diets.
                    It's about adopting a healthy, balanced lifestyle that makes you feel your best, inside and out.
                    We believe that small, consistent changes lead to lasting transformation.
                    We're here to guide and support you on your journey to a stronger life.</p>
                </div>
                <div class="us">
                    <img src="img/Team-pana-1024x1024.png" 
                         alt="Abstract wellness image" 
                         class="rounded-lg shadow-xl w-full h-auto max-w-xs mx-auto">
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer id="contact" class="content-section bg-gray-800 py-10">
            <div class="max-w-7xl mx-auto text-center text-white">
                <p class="mb-4 text-gray-400" data-translate-key="footer_text">&copy; 2025, Senior Project, Mada Saleh, Ahmed Khalifa, Lora Adel, Supervisor Dr.Abdulla Mohamed Khalid Alqaddoumi</p>
            </div>
        </footer>

    </div>

    <script>
        // --- Translation Data ---
        const translations = {
            'en': {
                'page_title': 'MALFIT - Home',
                'logo': 'MALFIT',
                'nav_notification': 'Notification',
                'nav_logout': 'Log Out',
                'hero_welcome': 'Welcome to',
                'btn_calories': 'Calories',
                'btn_eat_healthy': 'Eat Healthy',
                'btn_plans': 'Plans',
                'btn_clubs': 'Clubs',
                'btn_survey': 'Survey',
                'btn_contact': 'Contact Us',
                'about_title': 'About Us',
                'about_text_p1': `At MALFIT, we believe that true health extends beyond diets. It's about adopting a healthy, balanced lifestyle that makes you feel your best, inside and out. We believe that small, consistent changes lead to lasting transformation. We're here to guide and support you on your journey to a stronger life.`,
                'footer_text': '© 2025, Senior Project, Mada Saleh, Ahmed Khalifa, Lora Adel, Supervisor Dr.Abdulla Mohamed Khalid Alqaddoumi',
                'lang_code': 'EN'
            },
            'ar': {
                'page_title': 'ملفت - الصفحة الرئيسية',
                'logo': 'ملفت',
                'nav_notification': 'الإشعارات',
                'nav_logout': 'تسجيل الخروج',
                'hero_welcome': 'مرحباً إلى',
                'btn_calories': 'السعرات الحرارية',
                'btn_eat_healthy': 'تناول طعام صحي',
                'btn_plans': 'الخطط',
                'btn_clubs': 'الأندية',
                'btn_survey': 'الاستبيان',
                'btn_contact': 'اتصل بنا',
                'about_title': 'عنّا',
                'about_text_p1': `في ملفت، نؤمن بأن الصحة الحقيقية تتجاوز مجرد الأنظمة الغذائية. إنها تتعلق بتبني نمط حياة صحي ومتوازن يجعلك تشعر بأفضل حال، من الداخل والخارج. نؤمن بأن التغييرات الصغيرة والمستمرة تؤدي إلى تحول دائم. نحن هنا لإرشادك ودعمك في رحلتك نحو حياة أقوى.`,
                'footer_text': '© 2025، مشروع تخرج، مدى صالح، أحمد خليفة، لورا عادل، المشرف الدكتور عبد الله محمد خالد القادومي',
                'lang_code': 'ع' 
            }
        };

        let currentLang = 'en';

        /**
         * Updates the content of the page based on the selected language and handles RTL layout.
         * @param {string} lang - The target language code ('en' or 'ar').
         */
        function updateContent(lang) {
            currentLang = lang;
            const dir = (lang === 'ar') ? 'rtl' : 'ltr';
            const langData = translations[lang];
            const html = document.documentElement;

            // 1. Update HTML language and direction attributes
            html.setAttribute('lang', lang);
            html.setAttribute('dir', dir);
            
            // 2. Update all translated elements
            document.querySelectorAll('[data-translate-key]').forEach(element => {
                const key = element.getAttribute('data-translate-key');
                if (langData[key]) {
                    // Update text content
                    element.textContent = langData[key];
                    
                    // Handle special case for 'hero_welcome' where 'MALFIT' is in a separate span
                    if (key === 'hero_welcome') {
                        // The logo span needs its translation too, but it's handled separately with its own key
                        // This prevents duplicating logic, just ensuring all keys are processed.
                    }
                }
            });

            // 3. Update the language code display in the header
            document.getElementById('current-lang').textContent = langData.lang_code;

            // 4. Persist the selection
            localStorage.setItem('malfitLang', lang);
        }

        document.addEventListener('DOMContentLoaded', () => {
            // --- Mobile Menu Toggle Handler ---
            const menuToggle = document.getElementById('menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            const langToggle = document.getElementById('lang-toggle');
            
            menuToggle.addEventListener('click', () => {
                mobileMenu.classList.toggle('active');
            });
            
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.remove('active');
                });
            });

            // --- Language Toggle Handler ---
            langToggle.addEventListener('click', () => {
                const newLang = (currentLang === 'en') ? 'ar' : 'en';
                updateContent(newLang);
            });

            // --- Initial Language Load ---
            const savedLang = localStorage.getItem('malfitLang') || 'en';
            updateContent(savedLang);


            // --- Firebase Initialization (Kept for environment compatibility) ---
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
            
            if (Object.keys(firebaseConfig).length === 0) {
                 console.warn("Firebase configuration is missing. Data persistence will not be available.");
            }
            // Real Firebase logic moved to external module script for environment compatibility, as mandated.
        });
    </script>
    
    <!-- Firebase Initialization Script -->
    <!-- This boilerplate is required for authentication and data persistence in this environment -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables 
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');

        // Initialize Firebase
        if (Object.keys(firebaseConfig).length > 0) {
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);
            const auth = getAuth(app);
            setLogLevel('Debug');

            // Authentication Setup 
            const initAuth = async () => {
                try {
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        console.log("Signing in with custom token...");
                        await signInWithCustomToken(auth, __initial_auth_token);
                    } else {
                        console.log("Signing in anonymously...");
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Firebase authentication failed:", error);
                }
            };

            let userId = null;
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    userId = user.uid;
                    console.log("User signed in. User ID:", userId);
                    // Public Data Path: /artifacts/APP_ID/public/data/...
                    // Private Data Path: /artifacts/APP_ID/users/USER_ID/...
                } else {
                    console.log("User signed out or anonymous.");
                    userId = crypto.randomUUID(); // Fallback for unauthenticated state
                }
            });

            initAuth();
        }
    </script>
</body>
</html>
